import{r as x,u as N,j as e,L as j,E as k}from"./index-Ce-aIIIL.js";import{A as y,B as d}from"./Badge-MNIyWpy1.js";import{f as o,t as b,c as g}from"./index-CABy_kWu.js";const w=x.memo(function({thread:s,style:l}){var u;const{getUser:n,getCategory:r,getPostsByThread:a}=N(),t=n(s.authorId),i=r(s.categoryId),c=a(s.id),m=c.length,p=c[c.length-1],h=p?o(p.createdAt):o(s.createdAt);return e.jsx("article",{className:`card p-4 hover:shadow-md transition-all duration-200 ${s.isRead?"":"border-l-2 border-l-rust-400"}`,style:l,"aria-label":`Thread: ${s.title}`,children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 pt-0.5",children:e.jsx(y,{user:t,size:"sm"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.isPinned&&e.jsxs(d,{variant:"pinned",children:[e.jsx("span",{"aria-hidden":"true",children:"ðŸ“Œ"})," Pinned"]}),!s.isRead&&e.jsx(d,{variant:"unread",children:"New"}),i&&e.jsxs(j,{to:`/category/${i.id}`,className:`badge ${i.color} hover:opacity-80 transition-opacity`,"aria-label":`Category: ${i.name}`,children:[i.icon," ",i.name]})]}),e.jsx("time",{className:"text-xs text-ink-400 dark:text-ink-500 flex-shrink-0",dateTime:s.createdAt,title:new Date(s.createdAt).toLocaleString(),children:o(s.createdAt)})]}),e.jsx("h2",{className:"font-display text-base font-semibold text-ink-900 dark:text-parchment-100 leading-snug mb-1",children:e.jsx(j,{to:`/thread/${s.id}`,className:"hover:text-rust-600 dark:hover:text-rust-400 transition-colors focus-visible:underline",children:s.title})}),e.jsx("p",{className:"text-sm text-ink-500 dark:text-ink-400 mb-3 leading-relaxed",children:b(s.body,120)}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs("span",{className:"text-xs text-ink-500 dark:text-ink-400",children:["by ",e.jsx("span",{className:"font-medium text-ink-700 dark:text-parchment-300",children:t==null?void 0:t.name})]}),e.jsxs("div",{className:"flex items-center gap-3 ml-auto text-xs text-ink-400 dark:text-ink-500",children:[e.jsxs("span",{className:"flex items-center gap-1","aria-label":`${m} replies`,children:[e.jsx("span",{"aria-hidden":"true",children:"ðŸ’¬"})," ",g(m)]}),e.jsxs("span",{className:"flex items-center gap-1","aria-label":`${s.views} views`,children:[e.jsx("span",{"aria-hidden":"true",children:"ðŸ‘"})," ",g(s.views)]}),e.jsxs("span",{className:"flex items-center gap-1","aria-label":`Last activity ${h}`,children:[e.jsx("span",{"aria-hidden":"true",children:"â±"})," ",h]})]}),((u=s.tags)==null?void 0:u.length)>0&&e.jsx("div",{className:"flex gap-1 flex-wrap w-full mt-1",children:s.tags.map(f=>e.jsxs(d,{variant:"tag",children:["#",f]},f))})]})]})]})})}),C=x.memo(function({threads:s,emptyMessage:l,onNewThread:n}){const r=x.useMemo(()=>[...s].sort((a,t)=>a.isPinned!==t.isPinned?a.isPinned?-1:1:new Date(t.createdAt)-new Date(a.createdAt)),[s]);return r.length===0?e.jsx(k,{icon:"ðŸŒ±",title:"No threads yet",description:l||"Be the first to start a discussion in this category.",action:n&&e.jsx("button",{onClick:n,className:"btn-primary",children:"Start a Discussion"})}):e.jsx("div",{className:"flex flex-col gap-3",role:"feed","aria-label":"Discussion threads",children:r.map((a,t)=>e.jsx("div",{className:"stagger-item",style:{animationDelay:`${t*60}ms`},children:e.jsx(w,{thread:a})},a.id))})});export{C as T};
